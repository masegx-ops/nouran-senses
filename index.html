<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nouran Senses โ ุงูุญูุงุณ ุงูุญููุฉ</title>
  <meta name="theme-color" content="#e24ba8"/>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="style.css" />

  <!-- Scripts (Google + App) -->
  <script defer src="app.js"></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <!-- ููู ุงูุดุงุดุฉ: ูุธูุฑ ุฃููุงู ูู ูููุนูู -->
  <div id="lockOverlay" class="lock hidden" aria-hidden="true">
    <div class="lock-card">
      <h2>ูุฑุญุจูุง ุจู ูู <span class="brand-mark">Nouran Senses</span></h2>
      <p class="muted">ููุญูุงุธ ุนูู ุฎุตูุตูุชูุ ูู ูุถูู ุฃุฏุฎู ุจูุงูุงุช ุงูุฏุฎูู.</p>
      <label>ุงุณู ุงููุณุชุฎุฏู
        <input id="lockUser" type="text" placeholder="ุงุณู ุงููุณุชุฎุฏู" autocomplete="username">
      </label>
      <label>ูููุฉ ุงููุฑูุฑ / PIN
        <input id="lockPass" type="password" placeholder="โขโขโขโข" autocomplete="current-password">
      </label>
      <div class="row">
        <button id="lockEnter" class="btn grad">ุฏุฎูู</button>
        <button id="lockReset" class="btn ghost">ูุณูุชุ</button>
      </div>
    </div>
  </div>

  <header class="top">
    <div class="title-wrap">
      <h1 class="app-title"><span class="curvy">Nouran</span> <span class="senses">Senses</span></h1>
      <div class="tagline">ุฐุงูุฑุฉ ุญุณููุฉ ูุญุธููุฉ โ ููุจุงูู ุฃููุ ุฎุตูุตูุฉ ุฃุนูู</div>
    </div>
    <!-- ุดุฑูุท ูุตุบูุฑุงุช: ุชุธูุฑ ููู ุงูุฎุตุงุฆุต ุงููุตุบูุฑุฉ -->
    <div id="miniBar" class="mini-bar" aria-label="ูุตุบูุฑุงุช ุงูุญูุงุณ"></div>
  </header>

  <main class="stage" id="stage">
    <!-- ุจุงูู ุงููุงููุฑุง -->
    <section id="panel-camera" class="panel active" aria-label="ุงููุงููุฑุง">
      <div class="panel-head">
        <h2>ุงููุงููุฑุง</h2>
        <div class="panel-actions">
          <button class="chip" data-minimize="#panel-camera">ุชุตุบูุฑ</button>
        </div>
      </div>
      <div class="live">
        <video id="liveVideo" playsinline autoplay muted></video>
        <canvas id="previewCanvas" class="hidden"></canvas>

        <div class="mic-meter"><div id="micBar" class="bar"></div></div>

        <div class="ctrls">
          <button id="startCam" class="btn grad">ุชุดุบูู ุงููุงููุฑุง</button>
          <button id="snap" class="btn ghost">ููุทุฉ</button>
          <button id="stopCam" class="btn ghost">ุฅููุงู</button>
        </div>
      </div>
      <!-- ุงูููุทุงุช ุชุธูุฑ ููุง ููุตุบูุฑุงุช -->
      <div id="shotsTray" class="tray"></div>
    </section>

    <!-- ุจุงูู ุงูุดุงุดุฉ -->
    <section id="panel-screen" class="panel" aria-label="ุชุณุฌูู ุงูุดุงุดุฉ">
      <div class="panel-head">
        <h2>ุงูุดุงุดุฉ</h2>
        <div class="panel-actions">
          <button class="chip" data-minimize="#panel-screen">ุชุตุบูุฑ</button>
        </div>
      </div>
      <div class="screen">
        <video id="screenVideo" playsinline controls class="preview hidden"></video>
        <div class="ctrls">
          <button id="startScreen" class="btn grad">ุจุฏุก ุชุณุฌูู ุงูุดุงุดุฉ</button>
          <button id="stopScreen" class="btn ghost">ุฅููุงู ุงูุชุณุฌูู</button>
        </div>
        <div class="hint muted">ููููู ูุชุงุจุนุฉ ุงูุชุณุฌูู ูุน ุฅุดุนุงุฑ ุงููุธุงูโฆ ุณูุถูู ุฃุฒุฑุงุฑ ุฅููุงู/ุงุณุชุฆูุงู ูู ุงูุฅุดุนุงุฑ ูู ุงูุฎูููุฉ (ูุฏุนูู ุนูู ุฃูุฏุฑููุฏ/ูุฑูู).</div>
      </div>
    </section>

    <!-- ุจุงูู ุงูุตูุช (ูุคุดุฑ + ุฅุนุฏุงุฏุงุช ุจุณูุทุฉ) -->
    <section id="panel-audio" class="panel" aria-label="ุงูุตูุช">
      <div class="panel-head">
        <h2>ุงูุตูุช</h2>
        <div class="panel-actions">
          <button class="chip" data-minimize="#panel-audio">ุชุตุบูุฑ</button>
        </div>
      </div>
      <div class="audio">
        <div class="mic-meter big"><div id="micBarBig" class="bar"></div></div>
        <p class="muted">ูุชุญุฑูู ุงููุคุดุฑ ูุน ุตูุชู. ูู ูุด ุจูุชุญุฑููุ ุงูุญุต ุฃุฐููุงุช ุงููููุฑูููู.</p>
      </div>
    </section>

    <!-- ุจุงูู ุงูุจุงุจ ุงูุณุญุฑู (ุดุงุช ุบุงูุฑ) -->
    <section id="panel-chat" class="panel" aria-label="ุงูุจุงุจ ุงูุณุญุฑู">
      <div class="panel-head">
        <h2>ุงูุจุงุจ ุงูุณุญุฑู</h2>
        <div class="panel-actions">
          <button class="chip" id="chatMin" data-minimize="#panel-chat">ุชุตุบูุฑ</button>
          <button class="chip" id="chatPop">ูุงูุฐุฉ</button>
        </div>
      </div>

      <div id="chatlog" class="chatlog" aria-live="polite"></div>

      <div class="chat-toolbar">
        <input id="chatFile" type="file" multiple accept="image/*,video/*,audio/*" hidden>
        <button id="btnAttach" class="btn pill">๐ ุฅุฑูุงู</button>
        <button id="btnVoice" class="btn pill">๐ค ุตูุช</button>
        <button id="btnGenImage" class="btn pill">๐ผ๏ธ ุชูููุฏ ุตูุฑุฉ</button>
      </div>

      <div id="chatDrafts" class="chat-drafts hidden"></div>

      <form id="chatForm" class="chatbox">
        <input id="chatInput" type="text" placeholder="ุงูุชุจ ุณุคุงูู ุฃู ุฃูุฑู ููุงโฆ" autocomplete="off" />
        <button type="submit" class="btn grad">ุฅุฑุณุงู</button>
      </form>

      <!-- ููุงุญุธุฉ: ุชูููุญ ูููุฉ ุงูุณุฑ ูุฎูู ููุง ูุธูุฑ ูุบูุฑู -->
      <span id="secretHint" class="hidden">ุงููุง ููุฑุงู</span>
    </section>

    <!-- ุจุงูู ุงูุนูููุงุช ุงูุนุงูุฉ -->
    <section id="panel-actions" class="panel" aria-label="ุงูุนูููุงุช">
      <div class="panel-head">
        <h2>ุงูุนูููุงุช</h2>
        <div class="panel-actions">
          <button class="chip" data-minimize="#panel-actions">ุชุตุบูุฑ</button>
        </div>
      </div>

      <div class="toggles">
        <label><input type="checkbox" id="autoUpload" checked> ุฑูุน ุชููุงุฆู ุจุนุฏ ุงูุงูุชูุงุท</label>
        <label><input type="checkbox" id="autoAnalyze" checked> ุชุญููู ุชููุงุฆู ุจุนุฏ ุงูุฑูุน</label>
        <label><input type="checkbox" id="autoDelete"> ุญุฐู ูุญูู ุจุนุฏ ุงูุชุญููู</label>
        <label><input type="checkbox" id="bgSync"> ูุฒุงููุฉ ูู ุงูุฎูููุฉ (ุชุฌุฑูุจูุฉ)</label>
      </div>

      <div class="progress">
        <div class="line">
          <span>ุงูุฑูุน:</span>
          <progress id="uploadProgress" max="100" value="0"></progress>
          <span id="uploadLabel">0%</span>
        </div>
        <div class="line">
          <span>ุงูุชุญููู:</span>
          <progress id="aiProgress" max="100" value="0"></progress>
          <span id="aiLabel">0%</span>
        </div>
      </div>

      <div id="toast" class="toast" role="status" aria-live="polite"></div>
    </section>
  </main>

  <!-- Dock ุณููู (ุชุงุจุงุช) -->
  <nav class="dock" aria-label="ุดุฑูุท ุงูุญูุงุณ">
    <button class="dock-btn active" data-target="#panel-camera">๐ท ุงููุงููุฑุง</button>
    <button class="dock-btn" data-target="#panel-screen">๐ฅ๏ธ ุงูุดุงุดุฉ</button>
    <button class="dock-btn" data-target="#panel-audio">๐ ุงูุตูุช</button>
    <button class="dock-btn" data-target="#panel-chat">โจ ุงูุจุงุจ ุงูุณุญุฑู</button>
    <button id="btnSettings" class="dock-btn settings">โ๏ธ</button>
  </nav>

  <!-- ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช (ุชุดูู ุฒุฑ ุชุญุฏูุซ ูุงุญุฏ) -->
  <dialog id="settingsDialog" class="settings">
    <form method="dialog">
      <h3>ุงูุฅุนุฏุงุฏุงุช</h3>
      <p class="muted">ููุงุชูุญู ุจุชุชุฎุฒู ูุญูููุง ุนูู ุฌูุงุฒู (localStorage). ุงูุณุญูุง ูู ููุง ููุช ูุง ุชุญุจ.</p>

      <fieldset>
        <legend>ุงูุฐูุงุก ุงูุงุตุทูุงุนู</legend>
        <label>OpenAI API Key
          <input id="openaiKey" type="password" placeholder="sk-..." />
        </label>
      </fieldset>

      <fieldset>
        <legend>ุงูุณุญุงุจุฉ (Google Drive)</legend>
        <label>Google OAuth Client ID
          <input id="googleClientId" type="text" placeholder="1234567890-xxxx.apps.googleusercontent.com" />
        </label>
        <label>Drive Folder ID (ุงุฎุชูุงุฑู)
          <input id="driveFolderId" type="text" placeholder="ูุซุงู: 1UqVnlvF79Euefok34dEQLTNmvFKGArC3" />
        </label>
        <div class="row">
          <button id="btnConnectDrive" class="btn grad" type="button">ุฑุจุท Google Drive</button>
        </div>
      </fieldset>

      <fieldset>
        <legend>ุงูุชุญุฏูุซุงุช (GitHub)</legend>
        <label>GitHub Token (ุฃู Install Token ูู GitHub App)
          <input id="ghToken" type="password" placeholder="ghp_... ุฃู app token" />
        </label>
        <label>ุงููุณุชูุฏุน (owner/repo)
          <input id="ghRepo" type="text" placeholder="USERNAME/nouran-senses" />
        </label>
        <label>ุงููุฑุน
          <input id="ghBranch" type="text" value="main" />
        </label>
        <div class="row">
          <input id="ghFiles" type="file" multiple hidden />
          <button id="btnPickUpdate" class="btn ghost" type="button">ุงุฎุชุฑ ูููุงุช ุงูุชุญุฏูุซโฆ</button>
          <button id="btnUploadUpdate" class="btn grad" type="button">ุฑูุน ุงูุชุญุฏูุซ</button>
        </div>
        <p class="muted small">ุฒุฑ ูุงุญุฏ ยซุฑูุน ุงูุชุญุฏูุซยป ูููู โ ุงูุฅุนุฏุงุฏุงุช ุงูุฃุฎุฑู ุชูุถู ูุฎููุฉ ูุจุณูุทุฉ.</p>
      </fieldset>

      <fieldset>
        <legend>ุงูุฎุตูุตูุฉ</legend>
        <label>ุชูุนูู ููู ุงูุดุงุดุฉ
          <input id="lockEnabled" type="checkbox" />
        </label>
        <label>ุงุณู ุงููุณุชุฎุฏู
          <input id="lockCfgUser" type="text" placeholder="ุงุณู ุงูุฏุฎูู" />
        </label>
        <label>ูููุฉ ุงููุฑูุฑ / PIN
          <input id="lockCfgPass" type="password" placeholder="โขโขโขโข" />
        </label>
      </fieldset>

      <div class="row end">
        <button id="saveSettings" class="btn grad" value="confirm">ุญูุธ</button>
        <button id="closeSettings" class="btn ghost" value="cancel">ุฅุบูุงู</button>
      </div>
    </form>
  </dialog>

  <footer class="foot">
    <span>ยฉ 2025 Nouran Senses</span>
    <span>ุชุทุจูู ููุจ ุชูุฏููู โ ูุนูู ุฃูููุงูู ููุฑูุน ุนูุฏ ุงูุงุชุตุงู</span>
  </footer>
</body>
</html>
